<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Place Info</title>

	<!-- Bootstrap -->
	<link href="../css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/introHCI.css" rel="stylesheet">
	<link href="../css/info.css" rel="stylesheet">

  </head>
  
  <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="navbar-headerw">
      <button id="menuButton" type="button" class="navbar-toggle pull-left">
        <span class="glyphicon glyphicon-chevron-left"></span>
      </button>
      <div class="navbar-brand">{{name}}</div>
  </div>
</div>

  <body>
  	<div class = "container-fluid container">
  			<div class = "row-fluid">
  				<div class= "col-xs-6">
  					<ul>
  						<li>{{cuisines}}</li>
  						<li>{{price}}</li>
  						<li>Rating: {{rating}}</li>
  					</ul>
  				</div>
  				<div class= "col-xs-6">
  					<ul>
  						<li>{{hours}}</li>
  						<li>{{open}}</li>
              <li>{{distance}}</li>
  					</ul>
  				</div>
  			</div>

      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d404476.9746959221!2d-122.20867729999998!3d37.626243749999986!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808fbb2a678bea9d%3A0x29cdf01a44fc687f!2sStanford+University!5e0!3m2!1sen!2sus!4v1392960982119" width="100%" height="450" frameborder="0" style="border:0" id="mapframe"></iframe>

        <div class = "row-fluid">
          <div class="two-col" id ="add-remove">
              <span class="glyphicon glyphicon-plus-sign"></span> &nbsp;
              Wishlist
          </div>
          <a href="/pasteats-editcreate/2"><div class="two-col">
              Post &nbsp; &nbsp;<span class="glyphicon glyphicon-pencil"></span>
              
            </div></a>
        </div>
			<div class = "row-fluid">
					<a href="{{website}}"><div class="btn btn-default col-xs-4">
		  				<span class="glyphicon glyphicon-link"></span>
		  				Website
		  			</div></a>
					<a href="#"><div class="btn btn-default col-xs-4">
		  			</div></a>
					<a href="tel:{{phone}}"><div class="btn btn-default col-xs-4">
		  				<span class="glyphicon glyphicon-earphone"></span>
		  				Call
		  			</div></a>
			</div>

      <div class="row-fluid">
         <div class= "photos">
            <a href="#">
              <img src="http://lorempixel.com/400/400/food/{{id}}">
            </a>
            <a href="#">
              <img src="http://lorempixel.com/400/400/food/2">
            </a>
            <a href="#">
              <img src="http://lorempixel.com/400/400/food/5">
            </a>
          </div>
      </div>
      <div class="row-fluid panel panel-default">
         <div class= "panel-body review">
            <span class = "header-text">Google Reviews</span>
            {{#each reviews}}
            <hr>
            <ul>
              <li>{{author_name}}</li>
              <li>1/2/14</li>
              <li><span class="glyphicon glyphicon-star"><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-empty"></span><span class="glyphicon glyphicon-star-empty"></span></li>
              <li>Rating: {{rating}}</li>
              <li> {{text}}</li>
            </ul>
            {{/each}}
          </div>
      </div>

  		</div>

  		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  		<script src="https://code.jquery.com/jquery.js"></script>
  		<!-- Include all compiled plugins (below), or include individual files as needed -->
  		<script src="../js/bootstrap.min.js"></script>
  		<script src="../js/info2.js"></script>
      <script type="text/javascript">
        $(document).ready(function() {
          $.get('/wishlist/find/', {gid: "{{id}}"}, function(result, err) {
            console.log('find callback called');
            console.log(result);
            if (err != "success") {console.log(err); return;}
            if (result.found) {
              console.log("found");
              $('#add-remove span').removeClass("glyphicon-plus-sign").addClass("glyphicon-remove");
              $('#add-remove').click(function(e) {
                e.preventDefault();
                $.get('/wishlist/remove/', {gid: "{{id}}", gref: "{{ref}}",},
                 function(result, err) {
                  if (err) console.log(err);
                });
              });
            } else {
              $('#add-remove').click(function(ev) {
                ev.preventDefault();
                $.ajax({
                  url: '/wishlist/add/', 
                  data: {
                    gid: "{{id}}",
                    gref: "{{ref}}"
                  }, 
                  complete: function(result, err) {
                    console.log('callback called');
                    if (err) console.log(err);
                    top.location.href = '/wishlist'
                  }
                });
              });
            }
          });
        });
      </script>

  	</body>
  	</html>













